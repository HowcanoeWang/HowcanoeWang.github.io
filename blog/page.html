<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta itemprop="name" content="合喵博客"/>
	<meta itemprop="image" content="http://www.sigmameow.com/images/logo.gif" />
	<meta name="description" itemprop="description" content="浩瀚猫及基友们的博客集散地" />
    
    <title>合喵博客</title>

	<link href="../images/home.ico" rel="icon"> 
	
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	
	<!-- Custom styles for this page -->
	<link rel="stylesheet" href="../css/index.css">
	<link rel="stylesheet" href="../css/blog.css">
    <link rel="stylesheet" href="../css/blog_article.css">
    
        <!-- jQuery -->
    <script src="https://cdn.bootcss.com/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@1.9.1/dist/showdown.min.js"></script>

    <!--  share.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HowcanoeWang/HowcanoeWang.github.io/css/share.min.css">
    
    <!-- gittalk comments -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.3/build/styles/default.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.3/build/highlight.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    
    <!-- latex formular extention-->
    <!--link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.js"></script-->

	<!-- load json database -->
	<script type="text/javascript" src="id.js"></script> 
  
    <script type="text/javascript">
        // template scorll function
        window.onscroll = function() {scrollFunction()};
        
        function scrollFunction() {
            if (document.body.scrollTop > 250 || document.documentElement.scrollTop > 250) {
                document.getElementById("myBtn").style.display = "block";
            } else {
                document.getElementById("myBtn").style.display = "none";
            }
        }
        /////////////////////////////////////////////////////
        
        // Add copy button on code block by clipboard.js
        //https://predictablynoisy.com/sphinx-copy-buttons
        function showCopy(){
            alert("已复制好，可贴粘。\nHas been copied to clipboard");
        };
    
        function addCopyButtonToCode(){
            // get all code elements
            var allCodeBlocksElements = $("pre");

            // For each element, do the following steps
            allCodeBlocksElements.each(function(ii) {
                // define a unique id for this element and add it
                var currentId = "codeblock" + (ii + 1);
                $(this).attr('id', currentId);

                // create a button that's configured for clipboard.js
                // point it to the text that's in this code block
                // add the button just after the text in the code block w/ jquery
                var clipButton = '<button class="btn copybtn" data-clipboard-target="#' + currentId + '" onclick="showCopy();"><img src="https://clipboardjs.com/assets/images/clippy.svg" width="13" alt="Copy to clipboard"></button>';
                $(this).before(clipButton); // .after() originally
            });

            // tell clipboard.js to look for clicks that match this query
            new Clipboard('.btn');
        }
        //////////////////////////////////////////////////////////////////////////
        
        // read param in url
        function getQueryVariable(variable){
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                    var pair = vars[i].split("=");
                    if(pair[0] == variable){return pair[1];}
            }
            return(false);
        };
        
        var id = getQueryVariable("id");
        if (typeof id == 'string') {
            var info = jsdb[id];
        }else{
            var info = {"id":"nan",
                        "title":"主标题",
                        "subtitle":"副标题",
                        "author":"浩瀚猫",
                        "word":"1k",
                        "date":"2018.11.16",
                        "type":["读书杂记","文学小说"],
                        "recommend":[1],
                        "img":"../images/blog-bg.jpg",
                        "file":""};
        };

        // change header back-img and recommend article
		$(function(){
			var urlString = 'url("' + info.img + '")';
			$('#header-img').css('background-image', urlString);
            
            var $jsontip = $("#recommand");
            var show = info.recommend;
            var recommandHtml = "";
            $jsontip.empty();
            for (var id in show) {
                page = jsdb[show[id]];
                recommandHtml += '<div class="post-preview">';
                recommandHtml += '<a href="page.html?id=' + page.id + '">';
                recommandHtml += '<h3 class="post-title">' + page.title + '</h3>';
                recommandHtml += '<h5 class="post-subtitle">' + page.subtitle + '</h5></a>';
                recommandHtml += '<p class="post-meta">字数: ' + page.word + ' | 作者: ' + page.author+ ' | 更新: ' + page.date + '</p></div><hr>';
            };
            $jsontip.html(recommandHtml);//显示处理后的数据
		});
        
        // change <head> meta infos
		document.title= info.title;
		$('meta[itemprop=name]').attr('content', info.title);
		$('meta[itemprop=image]').attr('content', info.img);
		$('meta[itemprop=description]').attr('content', info.subtitle);
    
        // dynamic load nav-bar, side-bar, and article contents
        $.get('../nav.html', function(data) {
           $('#nav-placeholder').html(data);
        });
        $.get('sidebar.html', function(data) {
           $('#left-sidebar').html(data);
        });
        
        // Add img title below the img 
        $(function () {
            var anchors = document.getElementsByTagName("img");
            for (var id in anchors) {
                var img = anchors.item(id)
                if (img.hasAttribute('title')){
                    var imgtitle = document.createElement("div");
                    imgtitle.classList.add("text-center")
                    imgtitle.classList.add("text-muted")
                    imgtitle.innerHTML = img.title;
                    img.parentNode.insertBefore(imgtitle, img.nextSibling)
                };
            };
        });
        
        // convert markdown
        var converter = new showdown.Converter();
        converter.setOption('parseImgDimensions', true);
        converter.setOption('simplifiedAutoLink', true);
        converter.setOption('literalMidWordUnderscores', true);            
        converter.setOption('strikethrough', true);            
        converter.setOption('tables', true);
        converter.setOption('tasklists', true);
        converter.setOption('simpleLineBreaks', true);
        converter.setOption('emoji', true);
        
        $.get("md/"+ info.file, function( md ) {
            html = converter.makeHtml(md);
            $('#page-placeholder').html(html);
            
            // Once the markdwon is loaded for the page, attach clipboard buttons
            addCopyButtonToCode();
            //  color codes by highlight.js 
            hljs.initHighlightingOnLoad();
        },'text');
    </script>
    
    <!--script>
    renderMathInElement(document.body,{delimiters: [
                            {left: "$$", right: "$$", display: true},
                            {left: "$", right: "$", display: true}
    ]});

    </script-->
</head>
<!-- oncontextmenu="return false" ondragstart="return false" onselectstart="return false" onselect="return false" onmouseup="return false" oncopy="return false" onbeforecopy="return false"-->
<body>
	<!--Navigation bar-->
	<div id="nav-placeholder"></div>
	<!--end of Navigation bar-->
	
	<!-- Page Header -->
    <header class="masthead" id="header-img">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-md-10 mx-auto">
            <div class="post-heading">
              <h1><script type="text/javascript">document.write(info.title)</script></h1>
              <h5 class="subheading"><script type="text/javascript">document.write(info.subtitle)</script></h5>
              <span class="meta">
              <a href="#"><script type="text/javascript">document.write(info.author)</script></a> | 字数: <script type="text/javascript">document.write(info.word)</script> | 更新于:  
              <script type="text/javascript">document.write(info.date)</script></span>
            </div>
          </div>
        </div>
      </div>
    </header>
    
    <a href="#header-img" class="btn btn-dark btn-sm to-top" id="myBtn">&nbsp;▲&nbsp;</a>
  	
  	<!-- Post Content -->
    <article>
      <div class="container py-3">
        <div class="row">
          <div class="col-md-2 mx-auto">
            <!--side bar-->
            <div id="left-sidebar" class="sidebar"></div>
          </div>
          <div class="col-md-10 mx-auto">
            <!-- contents page -->
            <div id="page-placeholder" class="mdcss"></div>
            <!-- contents page end-->
            
            <!-- share -->
            <div class="social-share text-center"></div>
          </div>
        </div>
      </div>
    </article>
  
    <!-- comments -->
    <div class="container">
		<div class="row">
			<div class="col-md-12 mx-auto">
				<div id="gitalk-container"></div>
			</div>
		</div>
	</div>
    
    <script type="text/javascript">
        var gitalk = new Gitalk({
            clientID: '3c878c32ef76c778d504',
            clientSecret: '588c832b887ea6136f4ec6b3ad7380066a829c87',
            repo: 'HowcanoeWang.github.io',
            owner: 'HowcanoeWang',
            admin: ['HowcanoeWang'],
            id: 'article_' + info.id,
            distractionFreeMode: false
        });
        gitalk.render('gitalk-container');
    </script>
	
	<!-- recommends -->
	<div class="container">
		<hr>
		<div class="text-center text-muted"><h2><p>推荐阅读</p></h2></div>
		<hr>
		<div class="row">
			<div class="col-md-10 mx-auto">
				<div id="recommand"></div>
			</div>
		</div>
	</div>
	
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<!-- Custom scripts for this template -->
    <script src="../js/clean-blog.js"></script>
    <script src="../js/social-share.min.js"></script>
</body>
</html>
